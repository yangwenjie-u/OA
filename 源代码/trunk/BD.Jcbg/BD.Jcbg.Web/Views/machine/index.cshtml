<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="/static/lib/jquery-2.1.4.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/lib/echarts.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/lib/jquery.scrollify.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=Nqv7EOZ2k8lYjVVh8n5E8aFB"></script>
    <script language="javascript" type="text/javascript">
        function IsIE() {
            return true;
            if (!!window.ActiveXObject || "ActiveXObject" in window) {
                var browser = navigator.appName
                var b_version = navigator.appVersion
                var version = b_version; //b_version.split(";")
                var trim_Version = version[1].replace(/[ ]/g, "");
                if (browser == "Microsoft Internet Explorer" && trim_Version == "MSIE6.0") {
                    alert("您的浏览器版本是IE 6.0，请使用IE 9.0或以上版本");
                    return false;
                } else if (browser == "Microsoft Internet Explorer" && trim_Version == "MSIE7.0") {
                    alert("您的浏览器版本是IE 7.0，请使用IE 9.0或以上版本");
                    return false;
                } else if (browser == "Microsoft Internet Explorer" && trim_Version == "MSIE8.0") {
                    alert("您的浏览器版本是IE 8.0，请使用IE 9.0或以上版本");
                    return false;
                } else {
                    return true;
                }

            } else {
                alert("您的浏览器不是IE浏览器，请使用IE 9.0或以上版本");
                return false;
            }

        }
    </script>
    <link href="/static/common/reset.css" rel="stylesheet" type="text/css" />
    <link href="/static/wgry/css/style.css" rel="stylesheet" type="text/css" />
    <link href="/static/wgry/css/welcome.css" rel="stylesheet" type="text/css" />
    <!-- /static/wgry/css/style.css -->
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
            color: #000;
        }

        #allmap {
            width: 800px;
            height: 800px;
            overflow: hidden;
            margin: 0;
            padding: 40;
            font-family: "寰蒋闆呴粦";
        }

        .panel {
            width: 100%;
            height: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
            font-family: "寰蒋闆呴粦";
        }

        .clearfix:after {
            content: "020";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        .clearfix {
            /* 瑙﹀彂 hasLayout */
            zoom: 1;
        }

        .form-inline {
            position: absolute;
            z-index: 9999;
        }

            .form-inline .form-group {
                display: inline-block;
            }

        #allprograme {
            width: 150px;
            height: 40px;
            color: #fff;
            position: absolute;
            /* top:745px; */
            left: 10px;
            /* z-index:9999; */
            border-radius: 5px;
            font-size: 18px;
            text-align: center;
            line-height: 40px;
            cursor: pointer;
            background: #539bdd;
        }

        #moresearch {
            width: 450px;
            height: 80%;
            /*border: 1px solid #bbb;*/
            background: #fff;
            position: absolute;
            /* top:790px; */
            left: 10px;
            border-radius: 5px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .moresearchtitle {
            position: absolute;
            overflow: auto;
            width: 430px;
        }

        .BMap_cpyCtrl {
            display: none;
        }

        .anchorBL {
            display: none;
        }


        /* #mapselect{
            margin-top:10px;
            margin-left:5px;
            width:100%;
            height:30px;
        } */

        #placeselect {
            /* width:100%; */
            height: 30px;
            /* background:rgb(245,248,253); */
            /* position:fixed; */
            /* z-index:9999; */
        }

        .form-control {
            width: 100px;
            height: 38px;
            border-radius: 5px;
            /* background:#348bc9; */
            border: 1px solid #eee;
        }

        #distpicker5 {
            width: 100%;
            height: 40px;
            background: rgb(245, 248, 253);
            position: fixed;
            z-index: 9999;
            border-radius: 5px;
        }

            #distpicker5 label {
                display: inline-block;
                width: 40px;
                height: 22px;
                background: #539bdd;
                border-radius: 5px;
                text-align: center;
                line-height: 22px;
                color: #fff;
            }

        .searchbutton {
            width: 100%;
            height: auto;
            border-bottom: 1px dashed #333;
            padding-top: 10px;
            padding-bottom: 10px;
        }

            .searchbutton label {
                font-size: 14px;
                font-weight: bold;
            }

            .searchbutton select {
                width: 150px;
                height: 30px;
                border-radius: 5px;
            }

            .searchbutton input {
                width: 250px;
                height: 25px;
                border-radius: 5px;
            }

            .searchbutton button {
                width: 50px;
                height: 25px;
                color: #fff;
                border-radius: 5px;
                text-align: center;
                background: #539bdd;
            }

        #listcontent {
            width: 100%;
            height: auto;
        }

        #qycontent {
            width: 100%;
            height: auto;
        }

        .singlelist {
            width: 100%;
            height: auto;
            border-bottom: 1px dashed #bbb;
            padding: 10px 0;
            cursor: pointer;
        }

        .gcsinglelist {
            width: 100%;
            height: auto;
            border-bottom: 1px dashed #bbb;
            padding: 10px 0;
            cursor: pointer;
        }

        .qysinglelist {
            width: 100%;
            height: auto;
            border-bottom: 1px dashed #bbb;
            padding: 10px 0;
            cursor: pointer;
        }

        .rysinglelist {
            width: 100%;
            height: auto;
            border-bottom: 1px dashed #bbb;
            padding: 10px 0;
            cursor: pointer;
        }

        .singlelist_left {
            width: 70%;
            height: auto;
            float: left;
        }

        .singlelist_right {
            width: 30%;
            height: auto;
            float: left;
        }

        .singlelist_left p {
            font-size: 14px;
            padding: 5px;
        }

        .singlelist_right img {
            width: 100%;
            height: 100px;
        }

        .singlelist:hover {
            background: #ddd;
        }

        #enginner_bigbox {
            width: 500px;
            height: 200px;
        }

        #enginner_bigbox_left {
            width: 500px;
            height: 200px;
            float: left;
        }

        #enginner_bigbox_right {
            width: 150px;
            height: 200px;
            float: left;
            background: #fc3;
        }

        .enginner_bigbox_title {
            font-size: 18px;
        }

        .enginner_bigbox_address {
            font-size: 16px;
            margin-top: 5px;
        }

        .enginner_bigbox_all {
            font-size: 16px;
            color: #68aaff;
            padding-top: 5px;
        }

        #enginner_bigbox_bottom {
            width: 500px;
            height: 200px;
            margin-top: 20px;
        }

        .bigbox_bottom_left {
            display: inline-block;
            width: 80px;
            height: 35px;
            font-size: 14px;
            background: #0091ff;
            color: #fff;
            text-align: center;
            line-height: 35px;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
        }

        .bigbox_bottom_right {
            display: inline-block;
            width: 80px;
            height: 35px;
            font-size: 14px;
            background: #0091ff;
            color: #fff;
            text-align: center;
            line-height: 35px;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
        }

        #factory_bigbox {
            width: 500px;
            height: 200px;
            position: relative;
        }

        #factory_bigbox_left {
            width: 350px;
            height: 200px;
            float: left;
        }

        #kq_bigbox_left {
            width: 350px;
            height: 200px;
            float: left;
        }

        #factory_bigbox_right {
            width: 150px;
            height: 200px;
            background: #fc3;
            position: absolute;
            top: 30px;
            right: 0;
        }

            #factory_bigbox_right img {
                width: 150px;
                height: 200px;
            }

        .factory_bigbox_title {
            font-size: 18px;
        }

        .factory_bigbox_number {
            font-size: 16px;
            margin-top: 10px;
        }

        .factory_bigbox_state {
            font-size: 16px;
            margin-top: 10px;
        }

        .factory_button_left {
            width: 80px;
            height: 35px;
            display: inline-block;
            background: #0091ff;
            color: #fff;
            border-radius: 5px;
            text-align: center;
            line-height: 35px;
            margin-top: 10px;
            cursor: pointer;
        }

        .factory_button_right {
            width: 80px;
            height: 35px;
            display: inline-block;
            background: #0091ff;
            color: #fff;
            border-radius: 5px;
            text-align: center;
            line-height: 35px;
            margin-top: 10px;
            cursor: pointer;
            margin-left: 10px;
        }

        .people_bigbox_left {
            width: 350px;
            height: 200px;
            float: left;
        }

        .people_bigbox_right {
            width: 150px;
            height: 200px;
            background: #fc3;
            float: right;
        }

            .people_bigbox_right img {
                width: 150px;
                height: 200px;
            }

        .people_bigbox_tttle {
            font-size: 18px;
            margin-top: 10px;
        }

        .people_bigbox_name {
            font-size: 16px;
            color: #0091ff;
            padding-top: 10px;
        }

        #pepple_button_left {
            width: 80px;
            height: 35px;
            display: inline-block;
            background: #0091ff;
            color: #fff;
            border-radius: 5px;
            text-align: center;
            line-height: 35px;
            margin-top: 10px;
            cursor: pointer;
        }

        #pepple_button_right {
            width: 80px;
            height: 35px;
            display: inline-block;
            background: #0091ff;
            color: #fff;
            border-radius: 5px;
            text-align: center;
            line-height: 35px;
            margin-top: 10px;
            margin-left: 10px;
            cursor: pointer;
        }

        .layui-tab-card > .layui-tab-title {
            margin-top: -10px;
        }

        #enginner_title {
            width: 100%;
            height: auto;
            margin-top: 40px;
        }

        .enginner_title_content {
            width: 12.5%;
            height: 70px;
            float: left;
            margin-top: 2px;
            cursor: pointer;
        }

        .all_num {
            text-align: center;
            font-size: 28px;
            color: #fff;
            margin-left: 10px;
            margin-right: 10px;
            background: rgb(50, 197, 210);
        }

        .all_title {
            color: #fff;
            text-align: center;
            font-size: 14px;
            padding-top: 5px;
            margin-left: 10px;
            margin-right: 10px;
            background: rgb(50, 197, 210);
        }

        .layui-tab-card {
            border: none;
        }

        #enginner_1 {
            height: 350px;
            background: white;
            float: left;
            margin-top: 10px;
            margin-left: 10px;
            margin-right: 10px;
        }

        #enginner_2 {
            height: 350px;
            background: white;
            float: left;
            margin-top: 10px;
            margin-left: 10px;
            margin-right: 10px;
        }

        #enginner_3 {
            height: 350px;
            background: white;
            float: left;
            margin-top: 10px;
            margin-left: 10px;
            margin-right: 10px;
        }

        #enginner_4 {
            height: 350px;
            background: white;
            margin-top: 10px;
            margin-left: 10px;
            margin-right: 10px;
        }

        #enginner_table {
            width: 100%;
            height: auto;
            margin-top: 30px;
        }

        #tdbackground3 {
            background: #fc3;
            color: #fff;
        }

        #tdbackground4 {
            background: #fc3;
            color: #fff;
        }

        #tdbackground5 {
            background: #fc3;
            color: #fff;
        }

        #moneyground11 {
            background: #fc3;
            color: #fff;
        }

        #moneyground14 {
            background: #fc3;
            color: #fff;
        }

        #enginner_table table {
            width: 100%;
            height: auto;
            background: #fff;
            /* margin-top:10px; */
        }

            #enginner_table table th {
                text-align: center;
                height: 30px;
                color: #fff;
                background: #539bdd;
            }

            #enginner_table table tr {
                border-bottom: 1px solid #bbb;
                color: #333;
            }


                /*#enginner_table table tr:nth-child(even) {
            background: #eee;
        }*/

                #enginner_table table tr td {
                    text-align: center;
                    padding: 5px 0;
                    color: #333;
                }

                    #enginner_table table tr td a:hover {
                        text-decoration: underline;
                        color: #0091ff;
                    }


        /* .layui-tab-card>.layui-tab-title {
                background-color: #539bdd;
            } */

        .layui-tab-card > .layui-tab-title .layui-this {
            background: rgb(83, 155, 221);
            color: #fff;
        }

        .assginlink {
            display: inline-block;
            width: 85px;
            height: 35px;
            border: 1px solid #333;
            margin-left: 10px;
            margin-top: 10px;
            border-radius: 5px;
            text-align: center;
            line-height: 35px;
        }

        .searchbound_title {
            font-size: 18px;
            margin-top: 10px;
            margin-left: 10px;
        }

            .searchbound_title input {
                width: 50px;
                height: auto;
            }

        .searchbound_bottom_enginner {
            display: inline-block;
            width: 50px;
            height: 30px;
            border: 1px solid #ccc;
            margin-left: 10px;
            text-align: center;
            line-height: 30px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
        }

        .searchbound_bottom_factory {
            display: inline-block;
            width: 50px;
            height: 30px;
            border: 1px solid #ccc;
            margin-left: 10px;
            text-align: center;
            line-height: 30px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
        }

        .searchbound_bottom_people {
            display: inline-block;
            width: 50px;
            height: 30px;
            border: 1px solid #ccc;
            margin-left: 10px;
            text-align: center;
            line-height: 30px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
        }

        #construcstyle img {
            width: 60px;
            height: 60px;
        }

        .custombutton {
            display: inline-block;
            width: 100px;
            height: 22px;
            background: yellow;
            border-radius: 5px;
            text-align: center;
            line-height: 22px;
            color: black;
            font-size: 18px;
        }


        .morebutton {
            font-size: 18px;
            padding-top: 5px;
        }

        .tableList {
            margin-left: 10px;
            width: 100%;
            height: auto;
            background: #fff;
            margin-top: 10px;
        }

            .tableList table tr th {
                text-align: center;
                height: 10px;
                padding: 10px 0;
                color: #fff;
                background: #539bdd;
            }

        .tableListtable tr {
            border-bottom: 1px solid #bbb;
            color: #333;
        }

        .tableList table tr:nth-child(even) {
            background: #eee;
        }

        .tableList table tr td {
            text-align: center;
            padding: 5px 0;
            color: #333;
        }

        .tablecharts_title {
            font-size: 18px;
            height: 10%;
            text-align: center;
            padding: 10px 0;
            font-weight: bold;
        }

        #charts_left {
            width: 50%;
            height: 90%;
            /* background:#f3c; */
            float: left;
        }

        #charts_right {
            width: 49%;
            height: 90%;
            /* background:#fc3; */
            float: left;
            border-left: 1px solid #ddd;
        }

        #charts_left_top {
            width: 100%;
            height: 45%;
            /* background:rgb(33, 118, 228); */
        }

        #left_top_chart {
            width: 70%;
            height: 100%;
            float: left;
        }

        #left_top_word {
            width: 30%;
            height: 100%;
            float: left;
        }

        .chart_number {
            margin-top: 70%;
            font-size: 20px;
        }

        .chart_word {
            font-size: 20px;
        }

        #right_top_chart {
            width: 70%;
            height: 100%;
            float: left;
        }

        #right_top_word {
            width: 30%;
            height: 100%;
            float: left;
        }

        .chart_number_women {
            margin-top: 70%;
            font-size: 20px;
        }

        .chart_word_women {
            font-size: 20px;
        }

        #charts_left_bottom {
            width: 100%;
            height: 58%;
        }

        #charts_right_top {
            width: 100%;
            height: 45%;
        }

        #charts_right_bottom {
            width: 100%;
            height: 58%;
        }
    </style>

    <!-- /static/wgry/css/welcome.css -->
    <style type="text/css">
        * {
            color: #545b6d;
        }

        #enginner_chart {
            display: flex;
        }


        .tab-title {
            border-top: 1px solid #e7e4ed;
            border-left: 1px solid #e7e4ed;
            border-bottom: 0px;
            border-top-left-radius: 10px;
            display: inline-block;
        }

            .tab-title li {
                border-right: 1px solid #e7e4ed;
                border-top-right-radius: 10px;
                background: #f0f3fa;
                color: #a6a8b4;
                vertical-align: top;
                display: inline-block;
                width: 100px;
                text-align: center;
                line-height: 30px;
                margin-left: -4px;
                vertical-align: bottom;
            }

            .tab-title .active {
                color: #555b69;
                position: relative;
                padding-bottom: 2px;
                font-weight: 600;
                top: 2px;
            }

        .line-delimiter {
            display: inline-block;
            width: 1px;
            text-align: center;
            border-left: 1px solid #d7d7e3;
            margin: 0 20px;
            height: 29px;
            vertical-align: middle;
        }

        .searchbutton {
            background: #f0f3fa;
            width: auto;
            border-bottom: 0px;
            padding: 6px 0 6px 40px;
        }

            .searchbutton input {
                width: 200px;
                display: inline-block;
            }

            .searchbutton label {
                font-weight: 600;
                margin-right: 30px;
            }

            .searchbutton button {
                background: #577cca;
                border-radius: 40px;
                text-align: center;
                color: white;
                border: 0px;
                width: 80px;
            }

        .search {
            background: #577cca;
            border-radius: 40px;
            text-align: center;
            color: white;
            border: 0px;
            width: 80px;
        }

        .layui-tab-content {
            padding: 0;
            background: white;
        }

        .tab-content {
            border: 1px solid #e7e4ef;
            border-radius: 10px;
            border-top-left-radius: 0px;
            background: white;
        }

        #enginner_title {
            display: -webkit-flex;
            display: flex;
            flex-wrap: nowrap;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
        }

        .enginner_title_content {
            background: white;
            border-bottom: 10px solid black;
            height: 50px;
            margin: 0 3px;
            padding: 0 4px;
            display: -webkit-flex;
            display: flex;
            flex-wrap: nowrap;
            justify-content: space-between;
            align-items: center;
        }

            .enginner_title_content .all_title {
                display: inline-block;
                width: 26%;
                margin: 0;
                height: 40px;
                /* line-height: 40px;*/
                color: #545b6d;
                font-size: 14px;
                background: white;
                padding: 0px;
                vertical-align: top;
            }

            .enginner_title_content .all_num {
                display: inline-block;
                width: 74%;
                color: #545b6d;
                font-size: 16px;
                text-align: right;
                margin: 0;
                background: white;
                vertical-align: middle;
                max-height: 40px;
            }

        .page {
            position: absolute;
            bottom: 10px;
            right: 0;
        }

        .tab-content .page .size {
            display: none;
        }

        .tab-title {
            cursor: pointer;
            margin-bottom: 0px;
        }

        .item {
            border: 1px solid #e7e4ed;
        }

        .item-content iframe {
            width: 100%;
            height: 100%;
        }

        .item-content {
            width: 100%;
            height: 100%;
            display: none;
        }

        .enginner_chart div {
            background: white;
        }

        #formData .bootstrap-select {
            width: 180px;
        }

        .moresearchtitle {
            width: 100%;
        }

        .margin {
            margin-left: 30px;
            margin-right: 30px;
        }

        #formData .form-control {
            padding: 0;
        }

        #allprograme {
            top: 50px;
        }

        #allMap {
            width: 100%;
            height: 100%;
        }

        #enginner_title {
            height: 16%;
        }

        .enginner_title_content {
            height: 80%;
        }

        #enginner_1, #enginner_2, #enginner_3 {
            height: 100%;
            width: 32%;
            margin: 0 10px;
        }

        #enginner_4 {
            margin-top: 2%;
        }

        #enginner_chart {
            height: 38%;
        }

        #enginner_4 {
            height: 36%;
        }

        .enginner_title_content .all_num {
            font-weight: 600;
            font-size: 18px;
        }
         #mapwrap {
        width: 90%;
        margin: 20px auto;
        height: 100%;
        display: flex
    }

    #map {
        width: 80%;
        height: 100%;
        position: relative;
        z-index: 13;
    }

    #mapInfo {
        width: 20%;
        height: 100%;
        background-color: #ffffff;
        box-sizing: border-box;
        padding: 40px 0 0 40px;
    }

    .subtitle-name {
        font-size: 28px;
        line-height: 32px;
        margin-bottom: 8px;
        margin-bottom: 40px;
    }

    #formData {
        padding: 4px 0;
        display: none;
    }

    #formData .form-group {
        display: inline-block;
    }

    * {font-family: "Î¢ÈíÑÅºÚ";box-sizing:border-box;font-size:16px;line-height:28px;}
body{margin:0;background-color:#E9ECF3;}
#top-fixed{position:fixed;top:0;left:0;width:100%;margin:0;padding:4px 18px;background-color:#E9ECF3;z-index:2;}
.title-name{font-size:32px;line-height:38px;margin-bottom:16px;margin-bottom:40px;padding-left:12px;}
#enginner_title{display:flex;width:100%;justify-content:space-between;}
#enginner_title > .enginner_title_content{width:11.4%;border-bottom-width:12px;border-bottom-style:solid;background:#ffffff;position:relative;}
.enginner_title_content>.all_title{color:#ADADAD;font-size:18px;line-height:48px;}
.enginner_title_content>.all_num{font-size:24px}
.tip{display:none;position:absolute;background-color:#5F7CDA;padding:10px 14px;border-radius:12px;left:50%;top:-70px;white-space:nowrap;z-index:4;color:#ffffff;}
.enginner_title_content:hover >.tip{display:block;} .tip>.arrow{display:block;position:absolute;left:20%;bottom:-16px;width:26px;height:16px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNiAxNiI+DQo8cGF0aCBkPSJNMCwwSDI2TDMsMTZaIiBmaWxsPSIjNUY3Q0RBIiBzdHJva2U9Im5vbmUiLz4NCjwvc3ZnPg==)}
/*section.panel{width:100%;margin-bottom:50px;padding:174px 5% 30px 5%;height:900px;}*/
section.panel2{width:100%;margin-bottom:50px;padding:50px 5% 30px 5%;}
.enginner_chart{display:flex;width:100%;height:100%;justify-content:space-between;flex-wrap:wrap;justify-content:space-between;align-items:stretch;align-content:space-between;}
.enginner_chart>.engineer{height:48%;background:#ffffff;border-radius:3px;}
button.searchbtn{background:#597ECB;width:96px;height:32px;color:#fff;border-radius:16px;border:none;font-size:18px;background:linear-gradient(to top, #4773c0 0%,#5a7cd1 100%);cursor:pointer;}
button.submitBtn{background-color:#6f9eee;color:#ffffff;border-bottom:4px solid #597ebe;width:206px;height:40px;border-radius:20px;border-top:none;border-left:none;border-right:none;font-size:20px;cursor:pointer;}
label{display:inline;margin:0 8px 0 16px;}
label>input[type="checkbox"],label>input[type="radio"]{margin-right:8px;}
label>span{margin-right:12px;vertical-align:top;}
.dataGridWrap{height:auto;border-radius:8px;overflow:hidden;box-shadow:0 0 14px 1px rgba(85,116,215,0.25);}
.dataGridToolbar{padding:12px 8px;background:linear-gradient(to bottom, #d0dbed 0%,#ebeff7 100%)}
.dataGridToolbar p{line-height:40px;margin-bottom:12px;}
span.btn{display:inline-block;margin-left:8px;margin-right:8px;padding:3px 8px;border-radius:4px;cursor:pointer;}
span.btn:hover{box-shadow:1px 1px 6px 0px rgba(0,0,0,0.3);background:rgba(255,255,255,0.8);}
span.dropbtn{position:relative;}
span.dropmenu{display:none;position:absolute;border:1px solid #aaa;box-shadow:1px 1px 3px 0 rgba(0,0,0,0.3);background-color:#fff;padding:4px 8px;z-index:4;white-space:nowrap;}
span.dropmenu a{display:block;color:inherit;text-decoration:none;border-top:1px solid #eee;padding:4px;}
span.dropmenu a:first-child{border-top:none;}
span.dropbtn:hover span.dropmenu{display:block;}
span.btn img{margin:0 8px 0 0;vertical-align:top;}

span.delimit{display:inline-block;border-left:1px solid #D7D7F3;height:28px;margin:0 16px 0  32px;vertical-align:text-top;}

p.inputline{margin:12px 0 12px 12px;line-height:32px;font-size:16px;}
table.inputtable{width:100%;margin-top:18px;}
table.inputtable th{text-align:right;font-size:16px;}
table.inputtable th,table.inputtable td{padding:3px 10px;vertical-align:top;}
p.formLine{padding-left:120px;margin-top:24px;margin-bottom:20px;}

input.textbox{border:1px solid #95B8E7;border-radius:4px;padding:0 0 0 6px;font-size:16px;vertical-align:baseline;}
select.combobox{border:1px solid #95B8E7;border-radius:4px;font-size:16px;vertical-align:baseline;height:30px;}
textarea.textbox{border:1px solid #95B8E7;border-radius:4px;padding:0 0 0 6px;font-size:16px;}
.dltabs{
    width: 90%;
    margin: 50px 0 0 5%;
}
dl.dltabs dt {background-color: #F0F3FA;border-top-left-radius: 12px;border-top-right-radius: 12px;box-shadow: 0 0 12px 0 rgba(0, 0, 0, 0.2);display: inline-block;font-size: 18px;padding-top: 12px;margin-right: -18px;position: relative;cursor: pointer;}
dl.dltabs dt span {padding: 0 36px 12px 36px;display: block;}
dl.dltabs dt.active {z-index: 12}
dl.dltabs dt.active span {padding-bottom: 20px;background-color: #F0F3FA;margin-bottom: -8px;}
dl.dltabs dd {display: none;width: 100%;background: #FFFFFF;clear: both;float: left;margin: 0;padding: 0;box-shadow: 0 0 12px 0 rgba(0, 0, 0, 0.2);z-index: 4;position: relative;border-top-right-radius: 12px;border-bottom-left-radius: 12px;border-bottom-right-radius: 12px;overflow: hidden;}
dl.dltabs dd.active {display: block;}
dl.dltabs .dataGridToolbar{padding:12px 8px;background:#F0F3FA;}
    </style>


    <style type="text/css">
        #enginner_title .enginner_title_content {
            width: 36%;
            background: white;
            border-bottom: 10px solid black;
            margin: 0 3px;
            padding: 5px 8px 0 8px;
            display: block;
        }

            #enginner_title .enginner_title_content .all_title {
                margin: 0;
                height: 50%;
                color: #333333;
                font-size: 16px;
                background: white;
                padding: 0px;
                vertical-align: top;
                text-align: left;
                width: 100%;
            }

            #enginner_title .enginner_title_content .all_num {
                height: 50%;
                color: #888888;
                font-size: 16px;
                text-align: left;
                margin: 0;
                background: white;
                vertical-align: middle;
            }
    </style>
</head>

<body class="wai_body font_faminly">

    <section class="panel" id="panel2" style="background:rgb(233,236,243)" data-section-name="section1">
        <div id="enginner_title">
            <div class="enginner_title_content" style="border-color:#5673d7">
                <p class="all_num" id="enginner_qyzs">0个</p>
                <p class="all_title">备案设备数量</p>

            </div>
            <div class="enginner_title_content" style="border-color:#73c8ef">
                <p class="all_num" id="enginner_zgcs">0个</p>
                <p class="all_title">在用设备数量</p>

            </div>
            <div class="enginner_title_content" style="border-color:#5474d7">
                <p class="all_num" id="enginner_jzmj">0人</p>
                <p class="all_title">特种作业人员数量</p>

            </div>
            <div class="enginner_title_content" style="border-color:#1ecdc0">
                <p class="all_num" id="enginner_gczj">0人</p>
                <p class="all_title">在岗人员数量</p>

            </div>

        </div>
        <div id="enginner_chart" class="clearfix margin">
            <div id="enginner_1"></div>
            <div id="enginner_2"></div>
            <div id="enginner_3"></div>
        </div>
        <div id="enginner_4" style="margin:10px 40px;"></div>
    </section>
<!--  
    <section class="panel" id="panel1" style="position: relative;background:rgb(233,236,243);padding:40px;" data-section-name="section2">
        <div id="placeselect">
            <div id="mapselect">

            </div>
        </div>
        <div id="allMap"></div>
        <div id="allprograme" style="top: 70px;left: 40px;">展开所有</div>
        <div id="moresearch" style="display:none;overflow: hidden;">
            <ul class="tab-title" id="tabData">
                <li class="active" id="GcList">工程</li>
                <li id="QyList" style="display:none">企业</li>
                <li id="Rylist" style="display:none">人员</li>
            </ul>
            <div class="item">
                <div class="item-content" style="display: block;">
                    <div class="searchbutton">
                        <label>工程名称</label>
                        <input type="text" placeholder="工程名称" class="form-control" id="txtGcmc">
                        <button onclick="btnSearch(1);">检索</button>
                    </div>
                    <div class="moresearchtitle">
                        <div id="listcontent"></div>
                        <div style="text-align:center" onclick="morelist(1);" class="morebutton" style="">
                            加载更多
                            <input id="gcpageindex" type="hidden" value="1">
                        </div>
                    </div>
                </div>
                <div class="item-content">
                    <div class="searchbutton">
                        <label>企业名称</label>
                        <input type="text" placeholder="企业名称" class="form-control" id="txtQymc">
                        <button onclick="btnSearch(2);">检索</button>
                    </div>
                    <div class="moresearchtitle">
                        <div id="qycontent"></div>
                        <div style="text-align:center" onclick="morelist(2);" class="morebutton">
                            加载更多
                            <input id="qypageindex" type="hidden" value="1">
                        </div>
                    </div>
                </div>
                <div class="item-content">
                    <div class="searchbutton">
                        <div>
                            <label>所属工程</label>
                            <input type="text" placeholder="所属工程" class="form-control" id="txtGcmcForRy">
                        </div>
                        <label style="width: 56px;display: inline-block;">人员</label>
                        <input type="text" class="form-control" placeholder="姓名或者身份证号" id="txtRymc">
                        <button onclick="btnSearch(3);">检索</button>
                    </div>
                    <div class="moresearchtitle">
                        <div id="rycontent"></div>
                        <div style="text-align:center" onclick="morelist(3);" class="morebutton">
                            加载更多
                            <input id="rypageindex" type="hidden" value="1">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
-->

     <section class="panel" id="panel3" data-section-name="section3" style="background: rgb(233, 236, 243);">
            <div id="mapwrap">
                <div id="map"></div>
                <div id="mapInfo">
                    <p class="subtitle-name">总工程数：<span id="gcAllNum" style="font-size:28px;"></span>个</p>
                    <p style="margin-bottom:12px;"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMiAyIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPg0KPGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiMyQjU4RUQiIC8+PC9zdmc+" />&emsp;在建工程：<span id="gcNum0"></span>个</p>
                    <p style="margin-bottom:12px;"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMiAyIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPg0KPGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiNGRjE3MTciIC8+PC9zdmc+" />&emsp;异常工程：<span id="gcNum1"></span>个</p>
                    <p style="margin-bottom:12px;"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMiAyIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPg0KPGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiNGRkE3MzkiIC8+PC9zdmc+" />&emsp;停工工程：<span id="gcNum2"></span>个</p>
                </div>
            </div>
    </section>


    <section class="panel" id="panel3" style="background:rgb(233,236,243)" data-section-name="section3">
        <div style="margin-left: 40px; margin-right: 40px;margin-top: 40px;height:800px">
            <div>
                <ul class="tab-title" id="tabTitle">
                    <li id="qytab">设备使用记录</li>
                    <li id="gctab" style="display:none;">工程一览</li>
                    <li id="rytab" style="display:none;">人员一览</li>
                </ul>
                <div class="item" id="item" style="height: 100px;margin-left: -4px;">
                    <div class="item-content" style="display: block;">
                        <iframe id="qyTable" src=""></iframe>
                    </div>

                    <div class="item-content">
                        <iframe id="gcTable" src=""></iframe>

                    </div>
                    <div class="item-content">
                        <iframe id="ryTable" src=""></iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <script src="/static/common/common.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/lib/layer/layer.js" type="text/javascript" charset="utf-8"></script>
    <link href="/static/lib/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="/static/lib/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <link href="/static/lib/bootstrap-select-1.12.4/css/bootstrap-select.min.css" rel="stylesheet" type="text/css" />
    <script src="/static/lib/bootstrap-select-1.12.4/js/bootstrap-select.min.js"></script>
    <!--/static/wgry/js/welcomezf.js-->
    <script type="text/javascript">
        function getBar(title, xAxis ,data){
            var option  = {
                title: {
                    text: title,
                    top: '3%',
                    left: '4%',
                },
              tooltip: {
                trigger: 'item',
                formatter: "{b}: {c}"
            },
    xAxis: {
        type: 'category',
        data: xAxis
    },
    yAxis: {
        type: 'value'
    },
    series: [{
        data: data,
        type: 'bar'
    }],
     color: ['#5674d6', '#1ecdbf', '#ea5d67', '#f7b96b', '#91c3f2', '#40c484', '#ff9570', '#84eac0', '#75a7ec']
};
return option;
}
        function statistics4() {

            ajaxTpl("/machine/GetRYLXFB", "", function (result) {
                 
                var ary = [];
                var val = [],tmp;
                for(var i = 0 ,len = result.Datas.length; i < len ; i++){
                    var tmp = result.Datas[i];
                    ary.push(tmp.name);
                    val.push(tmp.value);
                }
                var option = getBar("特种作业人员分布",ary,val);
                // option.grid = {y2: 140};
        option.xAxis.axisLabel = {  
            interval:0,//横轴信息全部显示  
            rotate:-20,//-30度角倾斜显示  
        }

                var doc = document.getElementById('enginner_4');
                echarts.init(doc).setOption(option);
                doc.style.background = "white";
            });
        }

        //工程一览初始化
        function initGcTable1(params) {
            //
            var src = "/WebList/EasyUiIndex?FormDm=GCZS_ZF&FormStatus=0&FormParam=PARAM--" + params;

            if ($("#gcTable").attr("src") != src) {
                $("#gcTable").attr("src", src);
            }

        }
        //企业一览初始化
        function initQyTable1(params) {
            var src = "/WebList/EasyUiIndex?FormDm=SB_ReportSBSY&FormStatus=0" /*+ params*/;

            if ($("#qyTable").attr("src") != src) {
                $("#qyTable").attr("src", src);
            }
        }

        //人员一览初始化
        function initRyTable1(params) {

            var src = "/WebList/EasyUiIndex?FormDm=WGRYZS_ZF&FormStatus=0&FormParam=PARAM--" + params;

            if ($("#ryTable").attr("src") != src) {
                $("#ryTable").attr("src", src);
            }
        }

        function fullscreen() {

            //每个图表的宽度
            var w = ($(".panel").width() + 270).toString() + "px";
            //每个图表的高度
            var h = ($(".panel").height() + 50).toString() + "px";


            var index = parent.layer.open({
                type: 2,
                content: '/WzWgry/index',
                area: [w, h],
                closeBtn: 0
            });

            parent.layer.full(index);

            parent.$(".layui-layer-title").css("height", "0");
        }

        function unfullscreen() {
            parent.layer.closeAll();
        }
    </script>
    <!--/static/wgry/js/map-zf.js-->
    <script type="text/javascript">
        function initMap() {
            return ;
            //地图相关
            map = new BMap.Map("allMap", {
                enableMapClick: false
            });

            $("#allMap").css("height", $("#panel1").height());

            //地图加载控件
            var mapType1 = new BMap.MapTypeControl({
                // mapTypes: [BMAP_NORMAL_MAP, BMAP_HYBRID_MAP]
            });
            var mapType2 = new BMap.MapTypeControl({
                anchor: BMAP_ANCHOR_TOP_RIGHT,
                offset: new BMap.Size(10, 50)
            });

            // var overView = new BMap.OverviewMapControl();
            var overViewOpen = new BMap.OverviewMapControl({
                isOpen: true,
                anchor: BMAP_ANCHOR_BOTTOM_RIGHT
            });
            //添加地图类型和缩略图
            map.addControl(mapType2); //左上角，默认地图控件

            var top_right_navigation = new BMap.NavigationControl({
                anchor: BMAP_ANCHOR_TOP_RIGHT,
                type: BMAP_NAVIGATION_CONTROL_SMALL,
                offset: new BMap.Size(50, 80)
            }); //右上角，仅包含平移和缩放按钮
            map.addControl(top_right_navigation);

            //地图中心
            getBoundary("浙江省台州市");

            //展开所有点击显示隐藏
            $("#allprograme").click(function () {
                var moresearch = $("#moresearch");
                moresearch.toggle();
                var str = moresearch.is(":hidden") ? "展开所有" : "隐藏列表";
                $(this).html(str);
            });

            //展开所有地图显示在下方
            // var topheight = 40;
            var topheightbottom = 80;
            // $("#allprograme").css({"top", 70);/
            // $("#moresearch").css("top", topheightbottom + 5);
            $("#moresearch").css({
                top: "110px",
                left: "40px"
            });
        }

        //获取行政区域
        function getBoundary(getcity) {
            if (!getcity) {
                return;
            }
            var bdary = new BMap.Boundary();
            bdary.get(getcity, function (rs) { //获取行政区域
                map.centerAndZoom(getcity, 11); //放大地图
                //map.clearOverlays();
                var count = rs.boundaries.length; //行政区域的点有多少个
                if (count === 0) {
                    alert('未能获取当前输入行政区域');
                    return;
                }

            });
        }

        //地图面板初始化
        function mapInit() {

            //清空覆盖物
            map.clearOverlays();
            $(".BMap_noprint").hide();
            //增加地图操作按钮
            var mapType = new BMap.MapTypeControl({
                anchor: BMAP_ANCHOR_TOP_RIGHT,
                offset: new BMap.Size(10, 50)
            });
            map.addControl(mapType);
            var top_right_navigation = new BMap.NavigationControl({
                anchor: BMAP_ANCHOR_TOP_RIGHT,
                type: BMAP_NAVIGATION_CONTROL_SMALL,
                offset: new BMap.Size(50, 80)
            }); //右上角，仅包含平移和缩放按钮
            map.addControl(top_right_navigation);

            formChange();

            if (tabId == "GcList") {
                gc_mapstyle();
            }
            if (tabId == "QyList") {
                qy_mapstyle();
            }
            if (tabId == "RyList") {
                ry_mapstyle();
            }
        }

        //工程图例
        function gc_mapstyle() {
            function ShowLegendControl() {
                this.defaultAnchor = BMAP_ANCHOR_BOTTOM_RIGHT;
                this.defaultOffset = new BMap.Size(5, 80); // 默认偏移量
            }
            ShowLegendControl.prototype = new BMap.Control();
            ShowLegendControl.prototype.initialize = function (map) {
                // 创建一个DOM元素
                var ul = document.createElement("ul");
                //console.log(ul1);BMap_noprint anchorBR
                ul.style.background = "White";
                ul.style.padding = "15px";
                ul.style.opacity = " 1";
                var li = $("<li id='construcstyle'>在建工程<img src='/skins/default/welcomezs/images/zj.png'/></li>").appendTo(ul);
                var li = $("<li id='construcstyle'>竣工工程<img src='/skins/default/welcomezs/images/jg.png'/></li>").appendTo(ul);
                var li = $("<li id='construcstyle'>停工工程<img src='/skins/default/welcomezs/images/tg.png'/></li>").appendTo(ul);
                // 添加DOM元素到地图中
                map.getContainer().appendChild(ul);
                // 将DOM元素返回
                return ul;

            }
            // 创建控件
            var showLegendCtrl = new ShowLegendControl();
            // 添加到地图当中
            map.addControl(showLegendCtrl);
        }

        //单位图例
        function qy_mapstyle() {
            function ShowLegendControl() {
                this.defaultAnchor = BMAP_ANCHOR_BOTTOM_RIGHT;
                this.defaultOffset = new BMap.Size(5, 80); // 默认偏移量
            }
            ShowLegendControl.prototype = new BMap.Control();
            ShowLegendControl.prototype.initialize = function (map) {
                // 创建一个DOM元素
                var ul = document.createElement("ul");
                ul.style.background = "White";
                ul.style.padding = "15px";
                ul.style.opacity = " 1";
                var li = $("<li id='construcstyle'>企业<img src='/skins/default/welcomezs/images/qy.png'/></li>").appendTo(ul);
                // 添加DOM元素到地图中
                map.getContainer().appendChild(ul);
                // 将DOM元素返回
                return ul;

            }
            // 创建控件
            var showLegendCtrl = new ShowLegendControl();
            // 添加到地图当中
            map.addControl(showLegendCtrl);
        }

        //人员图例
        function ry_mapstyle() {
            function ShowLegendControl() {
                this.defaultAnchor = BMAP_ANCHOR_BOTTOM_RIGHT;
                this.defaultOffset = new BMap.Size(5, 80); // 默认偏移量
            }
            ShowLegendControl.prototype = new BMap.Control();
            ShowLegendControl.prototype.initialize = function (map) {
                // 创建一个DOM元素
                var ul = document.createElement("ul");
                ul.style.background = "White";
                ul.style.padding = "15px";
                ul.style.opacity = "1";
                var li = $("<li id='construcstyle'>在职<img src='/skins/default/welcomezs/images/zz.png'/></li>").appendTo(ul);
                var li = $("<li id='construcstyle'>离职<img src='/skins/default/welcomezs/images/lz.png'/></li>").appendTo(ul);
                // 添加DOM元素到地图中
                map.getContainer().appendChild(ul);
                // 将DOM元素返回
                return ul;

            }
            // 创建控件
            var showLegendCtrl = new ShowLegendControl();
            // 添加到地图当中
            map.addControl(showLegendCtrl);
        }

        //获取工程一览
        function getGcListForMap() {

            var gcmc = $("#txtGcmc").val();
            var pageindex = $("#gcpageindex").val();

            // var obj = Object.assign(paramsData, {
            //     gcmc: gcmc,
            //     page: pageindex,
            // });
            var obj = {};
            jQuery.extend(obj, paramsData, {
                gcmc: gcmc,
                page: pageindex,
            });

            ajaxTpl("/machine/GetGcList", obj, function (result) {

                var gclist = result.data;

                //全部工程累加
                gclistAll = gclistAll.concat(gclist);

                //展开更多工程一览显示,地图标识
                setGclistForMap(gclist);

                //刷新标志设为false
                refreshmaptabflg1 = false;
            });
        }

        //展开更多工程一览显示
        function setGclistForMap(gclist) {
            var listdata = gclist;
            var singledata = "";
            $.each(listdata, function (index, value) {
                singledata += "<div class='gcsinglelist clearfix'><div class='singlelist_left'><p>工程名称:" + value.gcmc + "</p><p>工程地点:" + value.gcdd + "</p><p>工程状态:" + value.sy_gczt + "</p></div></div>"
            });
            $("#listcontent").append(singledata);
            addMarkerGclist(listdata);
            $(".gcsinglelist").click(function () {
                var singleclick = [];
                var num = $(this).index();
                singleclick.push(gclistAll[num]);
                addMarkerGclist(singleclick);
            });
        }

        //在地图上表示出来的点
        function addMarkerGclist(points) {
            for (var i = 0; i < points.length; i++) {
                var gcbz = points[i].gcbz;
                var jd;
                var wd;
                if (gcbz == "") {
                    return;
                    //gcbz = "120.709955,28.016725";
                }
                if (gcbz != "") {
                    jd = gcbz.split(",")[0];
                    wd = gcbz.split(",")[1];

                    var point = new BMap.Point(jd, wd);
                    if (points[i].sy_gczt == "在建工程") {
                        var myIcon = new BMap.Icon("/skins/default/welcomezs/images/zj.png", new BMap.Size(47.5, 47.5));
                    } else if (points[i].sy_gczt == "竣工工程") {
                        var myIcon = new BMap.Icon("/skins/default/welcomezs/images/jg.png", new BMap.Size(47.5, 47.5));
                    } else {
                        var myIcon = new BMap.Icon("/skins/default/welcomezs/images/tg.png", new BMap.Size(47.5, 47.5));
                    }

                    var marker = new BMap.Marker(point, {
                        icon: myIcon
                    });
                    map.addOverlay(marker);

                    //单个坐标的话设置为中心,并显示详细
                    if (points.length == 1) {
                        map.centerAndZoom(point, 12);
                        // showInfoGc(marker, points[0]);
                    } else if (i == 0) {
                        // showInfoGc(marker, points[0]);
                    }

                    (function () {
                        var infopoint = points[i];
                        var gcbh = points[i].gcbh;
                        marker.addEventListener("onclick", function (e) {
                            showInfoGc(this, infopoint);
                        });
                    })();
                }

            }
        }

        //点击不同的图标获取显示不同的值
        function showInfoGc(thisMaker, point) {
            var opts = {
                width: 500, // 信息窗口宽度
                height: 250, // 信息窗口高度
            }
            var enginnersingle = " ";
            enginnersingle += "<div id='enginner_bigbox'> ";
            enginnersingle += "<p class='enginner_bigbox_title'>工程名称：" + point.gcmc + "</p> ";
            enginnersingle += "<div id='enginner_bigbox_left'> ";
            enginnersingle += "<p class='enginner_bigbox_all'>建设单位：" + point.sy_jsdwmc + "</p> ";
            enginnersingle += "<p class='enginner_bigbox_all'>施工单位：" + point.sgdwmc + "</p> ";           
            enginnersingle += "</div> ";
            enginnersingle += "</div> ";
            var infoWindow = new BMap.InfoWindow(enginnersingle, opts);
            var addnumber = point;
            infoWindow.addEventListener("open", function (type, target, point) {
                $("#pepple_button_left").bind('click', function () {
                    togczsformap(addnumber.gcbh, addnumber.gcmc);
                });
            })
            thisMaker.openInfoWindow(infoWindow);
        }

        //获取企业一览
        function getQyListForMap() {


            var qymc = $("#txtQymc").val();
            var pageindex = $("#qypageindex").val();


            // var obj = Object.assign(paramsData, {
            //     qymc: qymc,
            //     page: pageindex,
            // });
            var obj = {};
            jQuery.extend(obj, paramsData, {
                qymc: qymc,
                page: pageindex,
            });

            ajaxTpl("/welcome/GetQyList", obj, function (result) {
                var qylist = result.data;

                //全部工程累加
                qylistAll = qylistAll.concat(qylist);

                //展开更多企业一览显示,地图标识
                setQylistForMap(qylist);

                //刷新标志设为false
                refreshmaptabflg2 = false;
            });
        }

        //展开更多企业一览显示
        function setQylistForMap(qylist) {
            var listdata = qylist;
            var singledata = "";
            $.each(qylist, function (index, value) {
                singledata += "<div class='qysinglelist clearfix'><div class='singlelist_left'><p>企业名称:" + value.qymc + "</p><p>企业地点:" + (value.szsf + value.szcs + value.szxq) + "</p><p>企业类型:" + value.lxmc + "</p><p>是否黑名单:" + (typeof (value.sfhmd) == "undefined" ? "否" : "是") + "</p></div></div>"
            });
            $("#qycontent").append(singledata);
            addMarkerQylist(qylist);
            $(".qysinglelist").click(function () {
                var singleclick = [];
                var num = $(this).index();
                singleclick.push(qylistAll[num]);
                addMarkerQylist(singleclick);
            });
        }

        //在地图上表示出来的点
        function addMarkerQylist(points) {
            for (var i = 0; i < points.length; i++) {
                if (points[i].lxbh != "") {

                    var jd = points[i].lon;;
                    var wd = points[i].lat;
                    if (jd == "") {
                        var jd = "121.348956";
                        var wd = "28.572395";
                    }

                    var point = new BMap.Point(jd, wd);
                    var myIcon = new BMap.Icon("/skins/default/welcomezs/images/qy.png", new BMap.Size(47.5, 47.5));
                    var marker = new BMap.Marker(point, {
                        icon: myIcon
                    });
                    map.addOverlay(marker);

                    //单个坐标的话设置为中心,并显示详细
                    if (points.length == 1) {
                        map.centerAndZoom(point, 14);
                        // showInfoQy(marker, points[0]);
                    } else if (i == 0) {
                        // showInfoQy(marker, points[0]);
                    }

                    (function () {
                        var infopoint = points[i];
                        var gcbh = points[i].gcbh;
                        marker.addEventListener("click", function () {
                            showInfoQy(this, infopoint);
                        });

                    })();
                }
            }
        }

        //点击不同的图标获取显示不同的值
        function showInfoQy(thisMaker, point) {
            var opts = {
                width: 500, // 信息窗口宽度
                height: 200, // 信息窗口高度
            }
            var factorysingle = " ";
            factorysingle += "<div id='enginner_bigbox'><p class='enginner_bigbox_title'>企业名称:" + point.qymc + "</p><div id='enginner_bigbox_left'><p class='enginner_bigbox_all'>企业类型:" + point.lxmc + "</p><p class='enginner_bigbox_all'>企业负责人:" + point.qyfzr + "</p><p class='enginner_bigbox_all'>联系电话:" + point.lxdh + "</p></div></div>";

            var infoWindow = new BMap.InfoWindow(factorysingle, opts);

            thisMaker.openInfoWindow(infoWindow);
        }

        //获取人员一览
        function getRyListForMap() {

            var gcmc = $("#txtGcmcForRy").val();
            var key = $("#txtRymc").val();
            var pageindex = $("#rypageindex").val();

            // var obj = Object.assign(paramsData, {
            //     gcmc: gcmc,
            //     key: key,
            //     page: pageindex,
            // });

            var obj = {};
            jQuery.extend(obj, paramsData, {
                gcmc: gcmc,
                key: key,
                page: pageindex
            });

            ajaxTpl("/welcome/GetRyList", obj, function (result) {
                var rylist = result.data;

                //全部工程累加
                rylistAll = rylistAll.concat(rylist);

                //展开更多工程一览显示
                setRylistForMap(rylist);

                //地图标识
                addMarkerRylist(rylist);

                //刷新标志设为false
                refreshmaptabflg3 = false;
            });
        }

        //展开更多人员一览显示
        function setRylistForMap(rylist) {
            var listdata = rylist;
            var singledata = "";
            $.each(listdata, function (index, value) {
                singledata += "<div class='rysinglelist clearfix'><div class='singlelist_left'><p>姓名:" + value.ryxm + "</p><p>身份证号:" + value.sfzhm + "</p><p>所属工程:" + value.gcmc + "</p><p>状态:" + (value.hasdelete ? "在职" : "离职") + "</p></div><div class='singlelist_right'><img src='data:image/png;base64," + ((value.zp == "" || typeof (value.zp) == "undefined") ? defimg : value.zp) + "'/></div></div>"
            });
            $("#rycontent").append(singledata);
            addMarkerRylist(listdata);
            $(".rysinglelist").click(function () {
                var singleclick = [];
                var num = $(this).index();
                singleclick.push(rylistAll[num]);
                addMarkerRylist(singleclick);
            });
        }

        //在地图上表示出来的点
        function addMarkerRylist(points) {
            for (var i = 0; i < points.length; i++) {
                var gcbz = points[i].gcbz;
                var jd;
                var wd;
                if (gcbz == "") {
                    gcbz = "120.699854,28.016724";
                }
                if (gcbz != "") {

                    jd = gcbz.split(",")[0];
                    wd = gcbz.split(",")[1];

                    var point = new BMap.Point(jd, wd);

                    if ((points[i].ryzt ? "在职" : "离职") == "在职") {
                        var myIcon = new BMap.Icon("/skins/default/welcomezs/images/zz.png", new BMap.Size(47.5, 47.5));
                    } else {
                        var myIcon = new BMap.Icon("/skins/default/welcomezs/images/lz.png", new BMap.Size(47.5, 47.5));
                    }

                    var marker = new BMap.Marker(point, {
                        icon: myIcon
                    });
                    map.addOverlay(marker);

                    //单个坐标的话设置为中心,并显示详细
                    if (points.length == 1) {
                        map.centerAndZoom(point, 12);
                        // showInfoRy(marker, points[0]);
                    } else if (i == 0) {
                        // showInfoRy(marker, points[0]);
                    }

                    (function () {
                        var infopoint = points[i];
                        var gcbh = points[i].gcbh;
                        marker.addEventListener("click", function () {
                            showInfoRy(this, infopoint);
                        });

                    })();
                }

            }
        }

        //点击不同的图标获取显示不同的值
        function showInfoRy(thisMaker, point) {
            var opts = {
                width: 500, // 信息窗口宽度
                height: 250, // 信息窗口高度
            }
            var peoplesingle = "";
            peoplesingle += "<div id='people_bigbox' class='clearfix'> ";
            peoplesingle += " <p class='people_bigbox_tttle'>姓名:" + point.ryxm + "</p> ";
            peoplesingle += "   <div class='people_bigbox_left'> ";
            peoplesingle += "   <p class='people_bigbox_name'>身份证号:" + point.sfzhm + "</p> ";
            peoplesingle += "   <p class='people_bigbox_name'>所在工程:" + point.gcmc + "</p> ";
            peoplesingle += "    <p class='people_bigbox_name'>工种:" + point.gz + "</p> ";
            peoplesingle += "   <p class='people_bigbox_name'>人员状态:" + (point.hasdelete ? "在职" : "离职") + "</p>";
            peoplesingle += "<span id='pepple_button_left'>查看详细</span> ";
            peoplesingle += "     </div> ";
            peoplesingle += "   <div class='people_bigbox_right'><img src='data:image/png;base64," + ((point.zp == "" || typeof (point.zp) == "undefined") ? defimg : point.zp) + "'/></div></div></div> ";
            var infoWindow = new BMap.InfoWindow(peoplesingle, opts);
            var addnumber = point;
            infoWindow.addEventListener("open", function (type, target, point) {
                $("#pepple_button_left").bind('click', function () {
                    toryformap(addnumber.sfzhm, addnumber.gcbh);
                });
            })
            thisMaker.openInfoWindow(infoWindow);
        }
        function toryformap(sfzhm, gcbh) {

            //每个图表的宽度
            var w = ($(".panel").width() * 0.95).toString() + "px";
            //每个图表的高度
            var h = ($(".panel").height() * 0.9).toString() + "px";

            var index = parent.layer.open({
                type: 2,
                content: '/welcome/welcomeryz?sfzhm=' + sfzhm + '&gcbh=' + gcbh,
                area: [w, h]
            });
        }
        function togczsformap(gcbh, gcmc) {

            //每个图表的宽度
            var w = ($(".panel").width() * 0.95).toString() + "px";
            //每个图表的高度
            var h = ($(".panel").height() * 0.95).toString() + "px";

            var index = parent.layer.open({
                type: 2,
                content: '/welcome/welcomegcqp?gcbh=' + gcbh + '&gcmc=' + gcmc,
                area: [w, h]
            });

            //layer.full(index);
        }

        //获取更多工程,企业,人员
        function morelist(tabtype) {
            formChange();

            if (tabtype == "1") {
                var pageindex = parseInt($("#gcpageindex").val());
                pageindex = pageindex + 1;
                $("#gcpageindex").val(pageindex)
                getGcListForMap();
            }
            if (tabtype == "2") {
                var pageindex = parseInt($("#qypageindex").val());
                pageindex = pageindex + 1;
                $("#qypageindex").val(pageindex)
                getQyListForMap();
            }
            if (tabtype == "3") {
                var pageindex = parseInt($("#rypageindex").val());
                pageindex = pageindex + 1;
                $("#rypageindex").val(pageindex)
                getRyListForMap();
            }
        }

        //展开更多检索按钮
        function btnSearch(tabtype) {
            mapInit();

            if (tabtype == 1) {
                $("#gcpageindex").val("1");
                $("#listcontent").empty();
                gclistAll = new Array();
                getGcListForMap();
            }

            if (tabtype == 2) {
                $("#qypageindex").val("1");
                $("#qycontent").empty();
                qylistAll = new Array();
                getQyListForMap();
            }

            if (tabtype == 3) {
                $("#rypageindex").val("1");
                $("#rycontent").empty();
                rylistAll = new Array();
                getRyListForMap();
            }

        }




        //第一图刷新
        function refresh1() {
            //地图面板初始化
            mapInit();

            //工程刷新
            if (tabId == "GcList") {
                if (refreshmaptabflg1) {
                    // 工程一览获取,地图标注
                    getGcListForMap();
                } else {
                    // 地图标注
                    addMarkerGclist(gclistAll);
                }
                $(".moresearchtitle").css("height", $("#moresearch").height() - 120);
            }

            //企业刷新
            if (tabId == "QyList") {
                if (refreshmaptabflg2) {
                    // 工程一览获取,地图标注
                    getQyListForMap();
                } else {
                    // 地图标注
                    addMarkerQylist(qylistAll);
                }
                $(".moresearchtitle").css("height", $("#moresearch").height() - 120);
            }

            //人员刷新
            if (tabId == "RyList") {
                if (refreshmaptabflg3) {
                    // 工程一览获取,地图标注
                    getRyListForMap();
                } else {
                    // 地图标注
                    addMarkerRylist(rylistAll);
                }
                $(".moresearchtitle").css("height", $("#moresearch").height() - 170);
            }
        }

        $("#tabData").on("click", "li", function () {
            var that = $(this);
            var i = that.index();
            that.addClass("active").siblings().removeClass("active");
            that.parent().next().children().eq(i).show().siblings().hide();

            tabId = that.attr("id");

            formChange();

            switch (that.index()) {
                case 0:
                    if (!gclistAll.length) {
                        getGcListForMap();
                    }
                    /*      break;
                      case 1:
                          if (!qylistAll.length) {
                              getQyListForMap();
                          }
                          break;
                      case 2:
                          if (!rylistAll.length) {
                              getRyListForMap();
                          }
                          break;*/
                default:
                    break;
            }
        });
    </script>
    <!--/static/wgry/js/head-select.js-->
    <script type="text/javascript">
        //省
        function GetProvince() {
            return ;
            ajaxGet("/welcome/GetProvinceList", "", function (data) {
                var str = "";

                for (var i = 0, len = data.length; i < len; i++) {
                    if (i == 0) {
                        str += "<option selected='selected' value='" + data[i].szsf + "'>" + data[i].szsf + "</option>";
                    } else {
                        str += "<option value='" + data[i].szsf + "'>" + data[i].szsf + "</option>";
                    }
                }
                var val = $("#province10").removeAttr("disabled").append(str);

                $("#province10").change();
            });
        }



        //市
        function CityList() {
            var province = $("#province10").val();
            if (province != 0) {
                $.ajax({
                    type: "GET",
                    url: "/welcome/GetCityList?province=" + province,
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        var str = "";

                        for (var i = 0, len = data.length; i < len; i++) {
                            if (i == 0) {
                                str += "<option selected='selected' value='" + data[i].szcs + "'>" + data[i].szcs + "</option>";

                            } else {
                                str += "<option value='" + data[i].szcs + "'>" + data[i].szcs + "</option>";

                            }
                        }

                        var val = $("#city10").removeAttr("disabled").html(str);

                        $("#city10").change();

                    }
                });
            }
        }
        //区
        function XQList() {
            var province = $("#province10").val();
            var city = $("#city10").val();
            if (province != 0 && city != 0) {
                $.ajax({
                    type: "GET",
                    url: "/welcome/GetXQList?province=" + province + "&city=" + city,
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        var str = "";

                        for (var i = 0, len = data.length; i < len; i++) {
                            if (i == 0) {
                                str += "<option selected='selected' value='" + data[i].szxq + "'>" + data[i].szxq + "</option>";
                            } else {
                                str += "<option value='" + data[i].szxq + "'>" + data[i].szxq + "</option>";
                            }

                        }
                        if (i > 1) {
                            str = "<option value='' selected='selected' >请选择</option>" + str;
                        }

                        var val = $("#district10").html(str);

                        $("#district10").attr("val", "").change();

                    }
                });
            }
        }
        //街道
        function jDList() {
            var province = $("#province10").val();
            var city = $("#city10").val();
            var xq = $("#district10").val();
            if (province && city && xq) {
                $.ajax({
                    type: "GET",
                    url: "/welcome/GetJDList?province=" + province + "&city=" + city + "&xq=" + xq,
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        var str = "<option value='' selected='selected'>全部</option>";

                        for (var i = 0, len = data.length; i < len; i++) {
                            if (i == 0) {
                                str += "<option value='" + data[i].szjd + "'>" + data[i].szjd + "</option>";
                            } else {
                                str += "<option value='" + data[i].szjd + "'>" + data[i].szjd + "</option>";
                            }
                        }
                        $("#street10").html(str);
                    }
                });
            } else {
                $("#street10").val($("#street10 option:first").val());
            }
        }

        $("#province10").change(function () {
            CityList();
        });
        $("#city10").change(function () {
            XQList();
            var currentCity = $("#province10").val() + $(this).val();
            if (currentCity == tempCity) {
                return;
            }
            tempCity = currentCity;
            cityChange();
        });
        $("#district10").change(function () {
            jDList();

            var currentCity = $("#province10").val() + $("#city10").val() + $(this).val();
            if (currentCity == tempCity) {
                return;
            }
            tempCity = currentCity;
            cityChange();
        });
        $("#street10").change(function () {
            // 街道用区的 行政区
            var currentCity = $("#province10").val() + $("#city10").val() + $("#district10").val();
            tempCity = currentCity;
            cityChange();
        });

        //省变更 市变更 区变更
        function cityChange() {
            //地图定位
            getBoundary(tempCity);
            //全局初始化
            initvariable();
            //页面刷新
            pageLoad();
        }

        function bindChange() {
            //全部类型   建筑   交通
            $("#gcxz").change(function () {
                initvariable();
                pageLoad();
            });
            //所有企业 施工  监理   建设
            $("#selectQylx").change(function () {
                initvariable();
                pageLoad();
            });


            //所有工程  在建  竣工
            $("#selectGczt").change(function () {
                initvariable();
                Refresh()
            });

            //筛选工程名称/公司名称
            $("#keyVal").blur(function (event) {
                initvariable();
                Refresh()
            });

            //企业改变  改变企业下的工程
            $("#selectQy").change(function (event) {
                var gcbh = $(this).val();
                if (gcbh != "") {
                    ajaxTpl("/wzwgry/GetGcList_ByQybh", {
                        gcbh: gcbh
                    }, function (data) {
                        var str = "<option value=''>所有工程</option>";
                        for (var i = 0, len = data.Datas.length; i < len; i++) {
                            str += "<option value='" + data.Datas[i].gcbh + "'>" + data.Datas[i].gcmc + "</option>";
                        }
                        $("#selectGczt").html(str);
                    });
                }
                initvariable();
                Refresh()
            });
        }


        //获取企业一览,成功后内容初始化
        function pageLoad() {
            var province = $("#province10").val();
            var city = $("#city10").val();
            var district = $("#district10").val();
            var jd = $("#street10").val();

            var qylx = $("#selectQylx").val();
            var gcxz = $("#gcxz").val();

            if (type == 1) {
                //获取企业一览
                var data = {
                    province: province,
                    jd: jd,
                    city: city,
                    district: district,

                    qylx: qylx,
                    gcxz: gcxz
                };

                $.ajax({
                    type: "POST",
                    url: "/wzwgry/GetSelectQyList",
                    data: data,
                    dataType: "json",
                    success: function (result) {

                        var str = "<option value=''  selected='selected'>请选择企业</option>"
                        var d = result.rows;
                        for (var i = 0; i < d.length; i++) {
                            str += "<option value='" + d[i].qybh + "'>" + d[i].qymc + "</option>";
                        }
                        $("#selectQy").html(str);
                        $('#selectQy').selectpicker('refresh');
                        //刷新
                        Refresh();
                    }
                });
            } else {
                //刷新
                Refresh();
            }
        }


        var paramsData = {};

        function formChange(type) {
            var province = $("#province10").val();
            var city = $("#city10").val();
            var district = $("#district10").val();
            var jd = $("#street10").val();


            if (type) {
                //省 市 区 街道
                return {
                    province: province,
                    city: city,
                    district: district,
                    jd: jd
                };
            }

            var qylx = $("#selectQylx").val();
            var qybh = $("#selectQy").val();
            var gczt = $("#selectGczt").val();
            var gcxz = $("#gcxz").val();
            var key = $("#keyVal").val();

            paramsData = {
                province: province,
                city: city,
                district: district,
                jd: jd,
                qylx: qylx,
                qybh: qybh,
                gczt: gczt,
                gcxz: gcxz,
                key: key
            };
        }
    </script>
    <!--/static/wgry/js/load.js-->
    <script type="text/javascript">
        var tempCity = "浙江省温州市";

        var page = 1; //页面page，1，2，3
        var refreshflg1 = true; //页面1刷新flg
        var refreshflg2 = true; //页面2刷新flg
        var refreshflg3 = true; //页面3刷新flg

        //第一页所需参数
        var map; //百度地图
        var tabId = "GcList"; //地图页tab区分
        var gclistAll = new Array();
        var qylistAll = new Array();
        var rylistAll = new Array();
        var refreshmaptabflg1 = true; //tab1刷新flg
        var refreshmaptabflg2 = true; //tab2刷新flg
        var refreshmaptabflg3 = true; //tab3刷新flg
        var defimg = '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';

        //第二页所需参数
        var loop;
        var millisec = 60000;
        var firstflg = true;

        //第三页所需参数
        var listtabId = "gctab"; //tab区分
        var refreshlisttabflg1 = true; //tab1刷新flg
        var refreshlisttabflg2 = true; //tab2刷新flg
        var refreshlisttabflg3 = true; //tab3刷新flg

        $(function () {

            //全局初始化
            init();

            //获取省份
            GetProvince(1);

            //页面加载
            //pageLoad();

            //各选项changes事件绑定
            bindChange();



            // $("#tabTitle").children().eq(0).click();
            $(".all_num").css("line-height", $('.all_num').height() + "px");
            $(".all_title").css("line-height", $('.all_title').height() + "px");

            //地图初始化
            initMap();

        });

        //全局初始化
        function init() {
            //政府端
            if (type == 1) {
                // $("#province10").prop('disabled', true);
                // $("#city10").prop('disabled', true);
            } else {
                $("#selectQylx").prop('disabled', true);
                $("#selectQy").prop('disabled', true);
            }

            //鼠标滚动全屏
            $('.panel').css({
                'height': $(window).height()
            });
            $.scrollify({
                section: 'section',
                scrollbars: false,
                before: function () {
                    var sectionName = $.scrollify.current()[0].dataset.sectionName;
                    if (sectionName == "section1") {
                        page = 1;
                    }
                    if (sectionName == "section2") {
                        page = 2;
                    }
                    if (sectionName == "section3") {
                        page = 3;
                    }
                    Refresh();
                }
            });

            //加载固定块(回到顶部按钮)
            // layui.use('util', function () {
            //     var util = layui.util;
            //     util.fixbar({
            //         // bar1: true,
            //         click: function (type) {
            //             console.log(type);
            //             if (type === 'bar1') {
            //                 alert('点击了bar1')
            //             }
            //         }
            //     });
            // });
        }


        //全局变量初始化
        function initvariable() {

            clearInterval(loop);

            $("#gcpageindex").val("1");
            $("#qypageindex").val("1");
            $("#rypageindex").val("1");

            $("#listcontent").empty();
            $("#qycontent").empty();
            $("#rycontent").empty();

            $("#txtGcmc").val("");
            $("#txtQymc").val("");
            $("#txtGcmcForRy").val("");
            $("#txtRymc").val("");
            $("#txtLableGcmc").val("");
            $("#txtLableQymc").val("");
            $("#txtLableGcmcForRy").val("");
            $("#txtLableRymc").val("");

            refreshflg1 = true; //页面1刷新flg
            refreshflg2 = true; //页面2刷新flg
            refreshflg3 = true; //页面3刷新flg

            //第一页所需参数
            gclistAll = new Array();
            qylistAll = new Array();
            rylistAll = new Array();
            refreshmaptabflg1 = true; //tab1刷新flg
            refreshmaptabflg2 = true; //tab2刷新flg
            refreshmaptabflg3 = true; //tab3刷新flg

            //第二页所需参数
            firstflg = true;

            //第三页所需参数
            refreshlisttabflg1 = true; //tab1刷新flg
            refreshlisttabflg2 = true; //tab2刷新flg
            refreshlisttabflg3 = true; //tab3刷新flg
        }
        var onceTime = true;
        //刷新
        function Refresh() {

            //参数改变
            formChange();

            //统计页
            if (page == 1 && refreshflg1) {
                refresh2();
            }

            //地图页面
            if (page == 2 && refreshflg2) {


                clearInterval(loop);
                refresh1();
            }


            //一览页面
            if (page == 3 && refreshflg3) {

                if (onceTime) {
                    $("#tabTitle").children().eq(0).click();
                    onceTime = false;
                }
                clearInterval(loop);
                refresh3();

            }
        }

        //第二图刷新
        function refresh2() {


            setHW();
            statistics1();
            statistics2();
            statistics4();

            loop = setInterval(function () {

                setHW();
                statistics1();
                statistics2();
                statistics4();

            }, millisec);
        }

        window.onresize = function () {
            //高度调整
            setHW();
        }

        //统计图表宽高调整
        function setHW() {

            //每个图表的宽度
            // var bottomwidth = ($("#enginner_chart").width() - 60) / 3;
            // $("#enginner_1").css("width", bottomwidth);
            // $("#enginner_2").css("width", bottomwidth);
            // $("#enginner_3").css("width", bottomwidth);
            // $("#enginner_4").css("width", ($(".panel").width() - 80));

            //每个图表的高度
            // var bottomheight = ($(".panel").height() - 140) / 2;
            // $("#enginner_1").css("height", bottomheight);
            // $("#enginner_2").css("height", bottomheight);
            // $("#enginner_3").css("height", bottomheight);
            // $("#enginner_4").css("height", bottomheight);
        }



        //第三图刷新
        function refresh3() {

            $("#item").height($("#panel3").height() - 100);
            $("#tabTitle").find('.active').click();
        }

        //展开更多检索按钮
        // function btnLableSearch(flg) {

        // if (flg == 1) {
        //     initGcTable();
        // }

        // if (flg == 2) {
        //     initQyTable();
        // }

        // if (flg == 3) {
        //     initRyTable();
        // }
        // }

        // function togczs(gcbh, gcmc) {

        //     //每个图表的宽度
        //     var w = ($(".panel").width() * 0.95).toString() + "px";
        //     //每个图表的高度
        //     var h = ($(".panel").height() * 0.95).toString() + "px";

        //     var index = layer.open({
        //         type: 2,
        //         content: '/welcome/welcomegcqp?gcbh=' + gcbh + '&gcmc=' + gcmc,
        //         area: [w, h]
        //     });

        //     //layer.full(index);
        // }



        // function toqy(sfzhm, gcbh) {

        //     //每个图表的宽度
        //     var w = ($(".panel").width() * 0.95).toString() + "px";
        //     //每个图表的高度
        //     var h = ($(".panel").height() * 0.95).toString() + "px";

        //     var index = layer.open({
        //         type: 2,
        //         content: '/welcome/welcomeryz?sfzhm=' + sfzhm + '&gcbh=' + gcbh,
        //         area: [w, h]
        //     });

        // }

        // function tory(sfzhm, gcbh) {

        //     //每个图表的宽度
        //     var w = ($(".panel").width() * 0.95).toString() + "px";
        //     //每个图表的高度
        //     var h = ($(".panel").height() * 0.9).toString() + "px";

        //     var index = layer.open({
        //         type: 2,
        //         content: '/welcome/welcomeryz?sfzhm=' + sfzhm + '&gcbh=' + gcbh,
        //         area: [w, h]
        //     });
        // }

        var type = 1; //政府段：1  企业端：2



       
    function getPie(title, data) {
        if(data && !data.length){
            data = [{
                value: '1',
                name: '暂无数据'
            }]
        }
        var option = {
            title: {
                text: title,
                top: '3%',
                left: '4%',
            },
            tooltip: {
                trigger: 'item',
                formatter: "{b}: {c} ({d}%)"
            },
            legend: {
                type: 'scroll',
                orient: 'vertical',
                top: '10%',
                right: '10%',
                bottom: 20,
                selectedMode: false,
                itemWidth: 10,
                data: data
            },
            series: [{
                type: 'pie',
                radius: ['20%', '60%'], //内环 外环宽度
                center: ['36%', '56%'], //中点位置
                avoidLabelOverlap: false,
                label: {
                    normal: {
                        show: false
                    }
                },
                labelLine: {

                    normal: {
                        show: false
                    }
                },
                data: data
            }],
            color: ['#5674d6', '#1ecdbf', '#ea5d67', '#f7b96b', '#91c3f2', '#40c484', '#ff9570', '#84eac0', '#75a7ec']
        }
        return option;
    }
        //第一图
        function statistics1() {

            ajaxTpl("/machine/GetGC_QYFBTJ", paramsData, function (data) {

                var option =  getPie("设备区域分布统计" ,data.Datas);

                var doc = document.getElementById('enginner_1');
                echarts.init(doc).setOption(option);
                doc.style.background = "white";
            });
        }

        //第二图
        function statistics2() {

            ajaxTpl("/machine/GetTjlist", paramsData, function (data) {

                if (data.Datas && data.Datas[0]) {
                    statistics0Data(data); //八块内容
                    statistics2Data(data); //第二图
                    statistics3Data(data); //第三图
                }
            });
        }

        function statistics0Data(data) {
            var tmp = data.Datas[0];
            //var jzmj = (tmp.jzmj / 10000).toFixed(2) + '万方';
            //var gczj = (tmp.gczj / 10000).toFixed(2) + '亿元';
            var jzmj = tmp.jzmj;
            var gczj = tmp.gczj;

            $("#enginner_qyzs").html(tmp.sgdwnum + "个"); //备案设备数量
            $("#enginner_zgcs").html(tmp.zgcs + "个"); //在用设备数量
            $("#enginner_jzmj").html(jzmj + "个"); //特种作业人员数量
            $("#enginner_gczj").html(gczj + "个"); //在岗人员数量
            //  $("#enginner_zcry").html(tmp.zcry + "个"); //在册人员
            //  $("#enginner_yfje").html(tmp.yfje + "元"); //应发金额
            //  $("#enginner_sfje").html(tmp.sfje + "元"); //实发金额
            //  $("#enginner_ljffje").html(tmp.ljffje + "元"); //累计发放金额
        }


        function statistics2Data(data) {
          
            var tmp = data.Datas[0];

            var ary = [{
                name:'安装未使用',
                value:tmp.zzry
            },{
            name:'使用中',
                value:tmp.dqry
            }]
            var option = getPie("设备状态", ary);

            
   

            var doc = document.getElementById('enginner_2');
            echarts.init(doc).setOption(option);
            doc.style.background = "white";
        }

        function statistics3Data(data) {
            var name = [];
            var value = [];
            var legendName = [];

            var ary = [];
            var tmp = data.Datas[0];
            if (tmp.yfje) {
                name.push("检查维保");
                value.push(tmp.yfje);
                ary.push({
                    name: "检查维保",
                    value: tmp.yfje
                });
                legendName.push("检查维保 " + tmp.yfje);
            }
            if (tmp.sfje) {
                name.push("未检查维保");
                value.push(tmp.sfje);
                ary.push({
                    name: "未检查维保",
                    value: tmp.sfje
                });
                legendName.push("未检查维保 " + tmp.sfje);
            }

            var option = {
                title: {
                    text: '设备维保检查统计',
                    top: '3%',
                    left: '4%',
                },
                tooltip: {
                    trigger: 'item',
                    formatter: "{b}: {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    top: '10%',
                    right: '10%',
                    itemWidth: 10,
                    data: ary,
                    selectedMode: false,
                    formatter: function (val) {
                        for (var i = 0, len = name.length; i < len; i++) {
                            if (val == name[i]) {
                                return legendName[i];
                            }
                        }
                        return val;

                    }
                },
                series: [{
                    type: 'pie',
                    radius: ['20%', '60%'], //内环 外环宽度
                    center: ['36%', '56%'], //中点位置
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false
                        }
                    },
                    labelLine: {

                        normal: {
                            show: false
                        }
                    },
                    data: ary

                }],
                color: ['#5674d6', '#ea5d67']
            };
            var doc = document.getElementById('enginner_3');
            echarts.init(doc).setOption(option);
            doc.style.background = "white";

        }


        //第四图


        function getTmpParams() {
            var province = $("#province10").val();
            var city = $("#city10").val();
            var district = $("#district10").val() || ' ';
            var jd = $("#street10").val() || ' ';
            var qy = $("#selectQy").val() || ' ';

            // 省|市|取|街道|企业名|工程名|工程性质
            var gcm = $("#selectGczt").val() || ' ';
            var gcxz = $("#gcxz").val() || ' ';
            var ary = [province, city, district, jd, qy, gcm, gcxz];

            return ary.join("|");
        }



        $("#tabTitle").on("click", "li", function () {
            var that = $(this);

            var i = that.index();
            that.addClass("active").siblings().removeClass("active");
            that.parent().next().children().eq(i).show().siblings().hide();

            var params = getTmpParams();

            switch (i) {
                case 0:
                    initQyTable1(params);
                    break;
                case 1:
                    initGcTable1(params);
                    break;
                case 2:
                    initRyTable1(params);
                    break;
                default:
                    break;
            }
        });
    </script>
    <script type="text/javascript">
        $(function () {
            var src = window.location.href;
            var frames = window.parent.frames;
            var j = 0, href;
            for (var i = 0, len = frames.length ; i < len ; i++) {
                href = frames[i].location.href.split("#");
                if (href[0] == src) {
                    j++;
                }
            }
            if (j > 1) {
                $("#fullscreen").click(function () {
                    unfullscreen();
                }).html("关闭全屏");
            } else {
                $("#fullscreen").click(function () {
                    fullscreen();
                });
            }
            Refresh();
        });

        (function() {
            var map = new BMap.Map("map");
           
            map.centerAndZoom("台州市",13);
            var navigationControl = new BMap.NavigationControl({
                // 靠左上角位置
                anchor: BMAP_ANCHOR_TOP_RIGHT,
                // LARGE类型
                type: BMAP_NAVIGATION_CONTROL_LARGE,
                // 启用显示定位
                enableGeolocation: true
            });
            map.addControl(navigationControl);


            function getBoundary() {
                var bdary = new BMap.Boundary();
                bdary.get("台州市", function(rs) { //获取行政区域
                    var count = rs.boundaries.length; //行政区域的点有多少个
                    if (count === 0) {
                        alert('未能获取当前输入行政区域');
                        return;
                    }
                    var pointArray = [];
                    for (var i = 0; i < count; i++) {
                        var ply = new BMap.Polygon(rs.boundaries[i], { strokeWeight: 2, strokeColor: "#EF7F44", fillColor: "#EF7F44", fillOpacity: 0.1 }); //建立多边形覆盖物
                        map.addOverlay(ply); //添加覆盖物
                        pointArray = pointArray.concat(ply.getPath());
                    }
                    //map.setViewport(pointArray);    //调整视野      
                });
            }
            getBoundary();
            // status=0表示在建工程，status=1表示异常工程，status=2表示停工工程
            var myIcon = [
                new BMap.Icon("data:image/svg+xml;charset=utf-8,<svg  xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2 2' width='22px' height='22px'><circle cx='1' cy='1' r='1' fill='#2B58ED' /></svg>", new BMap.Size(22, 22)),
                new BMap.Icon("data:image/svg+xml;charset=utf-8,<svg  xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2 2' width='22px' height='22px'><circle cx='1' cy='1' r='1' fill='#FF1717' /></svg>", new BMap.Size(22, 22)),
                new BMap.Icon("data:image/svg+xml;charset=utf-8,<svg  xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2 2' width='22px' height='22px'><circle cx='1' cy='1' r='1' fill='#FFA739' /></svg>", new BMap.Size(22, 22))
            ];

            function addLabel() {

                ajaxTpl("/machine/GetProjectMap", "", function(val) {
                    var data= val.Datas;

                    var gc = [0, 0, 0];
                    for (var i = 0; i < data.length; i++) {
                        var pt = new BMap.Point(data[i].position[0], data[i].position[1]);
                        var marker = new BMap.Marker(pt, { icon: myIcon[data[i].status] });
                        map.addOverlay(marker);
                        gc[data[i].status]++;


                        (function() {
                            var infopoint = data[i];
                            // var gcbh = points[i].gcbh;
                            marker.addEventListener("onclick", function(e) {
                                showInfoGc(this, infopoint);
                            });
                        })();
                    }

                    $('#gcAllNum').text(i);
                    $('#gcNum0').text(gc[0]);
                    $('#gcNum1').text(gc[1]);
                    $('#gcNum2').text(gc[2]);
                    
                })
            }
            addLabel();
        })();

function showInfoGc(thisMaker, point) {

    var opts = {
        width: 200, // 信息窗口宽度
        height: 100, // 信息窗口高度
    }

    var enginnersingle = "<div onclick=loadView('"+ point.gcbh +"','"+ point.name+"')>" + point.name + "</div>";

    var infoWindow = new BMap.InfoWindow(enginnersingle, opts);
    var addnumber = point;
   

    infoWindow.addEventListener("open", function(type, target, point) {
        $("#pepple_button_left").bind('click', function() {
            togczsformap(addnumber.gcbh, addnumber.gcmc);
        });
    })
    thisMaker.openInfoWindow(infoWindow);

}


function loadView(gcbh,GCMC) {
    try {
        var tabledesc = "工程信息";

        // var rowindex = dataGrid.jqxGrid('getselectedrowindex');

        // if (rowindex == -1) {
            // alert("请选择要修改的预填信息");
            // return;
        // }
        // var selected = pubselect();
        // if (selected == undefined)
        //     return;
        var LX="N";
        // var gclxbh=selected.GCLXBH;
        // if(gclxbh=="01")
        //     LX="N";
        // else
        //     LX="S";
        
        var jydbh = encodeURIComponent(gcbh);
        var tabledesc = "工程信息";                // 表格描述
        var zdzdtable = encodeURIComponent("ZDZD_TZ"); // zdzd名
        var tablename = encodeURIComponent("I_M_GC");           // 表名
        var tablerecid = encodeURIComponent("GCBH");    // 表主键
        var title = encodeURIComponent(tabledesc);  // 标题
        var formdm = tablename;                             // 列表key名称
        var buttons = ""; // 按钮;//encodeURIComponent("临时保存|ZC| | ||完成报监|TJ| | "); // 按钮

         var s_tablename = encodeURIComponent("I_S_GC_SGDW|I_S_GC_JSDW|I_S_GC_JLDW|I_S_GC_KCDW|I_S_GC_SJDW|I_S_GC_TSDW|I_S_GC_FGC");
        //  都是从表中的字段：  主表对应字段,自己主键|……
        var s_pri = encodeURIComponent("GCBH,GCQYBH|GCBH,GCQYBH|GCBH,GCQYBH|GCBH,GCQYBH|GCBH,GCQYBH|GCBH,GCQYBH|GCBH,RECID");
        var s_title = encodeURIComponent("施工单位|建设单位|监理单位|勘察单位|设计单位|图审单位|单位工程");

        var ss_tablename = encodeURIComponent("I_S_GC_SGDW|I_S_GC_SGRY||I_S_GC_JSDW|I_S_GC_JSRY||I_S_GC_JLDW|I_S_GC_JLRY||I_S_GC_KCDW|I_S_GC_KCRY||I_S_GC_SJDW|I_S_GC_SJRY");
        //都是明细表中的字段：跟主表对应字段,跟从表对应字段,自己主键
        var ss_pri = encodeURIComponent("GCBH,QYBH,RECID|GCBH,QYBH,RECID|GCBH,QYBH,RECID|GCBH,QYBH,RECID|GCBH,QYBH,RECID");
        var ss_title = encodeURIComponent("施工人员|建设人员|监理人员|勘察人员|设计人员");

        var rdm = Math.random();

       
        var js = encodeURIComponent("searchRYZS.js");//encodeURIComponent("jdbgService.js");
        var callback = "";//encodeURIComponent("jdbgService.jdzcsb('$$GCBH$$')");

        var rdm = Math.random();
        var url = "/datainput/Index?zdzdtable=" + zdzdtable +
            "&t1_tablename=" + tablename +
            "&t1_pri=" + tablerecid +
            "&t1_title=" + title +
            "&button=" + buttons +
            "&js=" + js +
            "&callback=" + callback +
            "&rownum=2" +
            "&t2_tablename=" + s_tablename +
            "&t2_pri=" + s_pri +
            "&t2_title=" + s_title +
            "&t3_tablename=" + ss_tablename +
            "&t3_pri=" + ss_pri +
            "&t3_title=" + ss_title +
            "&view=true"+
            "&jydbh=" + jydbh +
            "&LX=" + LX +
            "&_=" + rdm;

        parent.layer.open({
            type: 2,
            title:GCMC,
            shadeClose: true,
            shade: 0.8,
            area: ['95%', '95%'],
            content: url,
            end: function () {
                searchRecord();
            }
        });
    } catch (e) {
        alert(e);
    }
}
    </script>
</body>

</html>