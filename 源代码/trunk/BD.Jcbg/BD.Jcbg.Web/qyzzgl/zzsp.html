<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/css-reset.css">
    <link rel="stylesheet" type="text/css" href="/static/css/table.css">
    <link rel="stylesheet" type="text/css" href="/static/lib/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="/static/lib/layer/theme/default/layer.css">



    <title>sxjz</title>
    <style type="text/css">
    .dltabs dd {
        height: 80vh;
    }

    .page {
        position: absolute;
        bottom: 0px;
    }

    .timeline-warp {
        padding: 30px 0 0 150px;
    }

    .taskname {
        font-size: 18px;
        margin: 10px 0;
    }

    .msg {
        font-size: 14px;
        /*padding-left: 10px;*/
        font-weight: 600;

    }

    .complte.layui-timeline-axis::before {
        border-radius: 50px;
        width: 8px;
        height: 8px;
        content: "";
        background: #5FB878;
        position: absolute;
        top: 6px;
        left: 6px;
    }
    </style>
</head>

<body>
    <div style="height: 100vh;overflow: auto;padding-bottom: 80px;box-sizing: border-box;">
        <div id="tableWarp" class="table-warp">
            <div>
                <table class="table layui-table table-border table-bordered table-hover" lay-size="lg">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>单位名称</th>
                            <th>企业类型</th>
                            <th>主项（增项）</th>
                            <th>资质类型</th>
                            <th>资质内容</th>
                            <th>资质等级</th>
                            <th>是否临时</th>
                            <th>申请表</th>
                            <th>审核进度</th>
                        </tr>
                    </thead>
                    <tbody class="tbody-list" id="yxqyzz">
                    </tbody>
                </table>
            </div>
            <div id="test" class="page">
                <span class="count"></span>
                <div class="layer-page" id="page"></div>
                <input type="text" class="page-val" value="1" />
                <span class="sure">确定</span>
                <!-- <div class="size">每页显示
                <input type="text" class="page-size" value="10" /> 条
            </div> -->
            </div>
        </div>
    </div>
    <div class="timeline-warp" id="timelineWarp" style="display: none;">
        <ul class="layui-timeline">
        </ul>
    </div>

    <!--  <div class="save-boottom" style="text-align: center;">
        <button class="layui-btn" id="save" style="margin-top: 10px;">保存</button>
    </div> -->

    <script type="text/javascript" src="/static/lib/jquery.js"></script>
    <script type="text/javascript" src="/static/lib/layui/layui.js"></script>
    <script type="text/javascript" src="/static/pub/common.js"></script>
    <script type="text/javascript" src="/static/pub/table.js"></script>

    <script type="text/javascript" src="/static/lib/layer/layer.js"></script>

    <script type="text/javascript">
    var list = [];
    var uploadList = [];

    var params = getParams();
    $(function () {
        // var height = $("#panel1").height();
        // $("#tabTitle").find("dd").height(height - 110);

        // $("#tabWarp").append("<input type='text' name='id' value='" + params.id + "' style='display:none;' />")
        // layui.use('form', function () {
        //     var form = layui.form;
        //     form.render();
        // });

        loadYxqyzz();

    })

    function loadYxqyzz() {

        var str = '';
        var item = ["qymc", "qylx", "zxlx", "zzlx", "zznr", "zzdj", "sfls"];
        var ary = [{
            zzbh: "000001",
            qymc: "单位1",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000002",
            qymc: "单位2",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000001",
            qymc: "单位1",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000002",
            qymc: "单位2",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000001",
            qymc: "单位1",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000002",
            qymc: "单位2",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000001",
            qymc: "单位1",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000002",
            qymc: "单位2",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000001",
            qymc: "单位1",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }, {
            zzbh: "000002",
            qymc: "单位2",
            qylx: "施工单位",
            zxlx: "主项",
            zzlx: "总承包",
            zznr: "房屋建筑工程",
            zzdj: "特技",
            sfls: "是否临时",
            zzyxrq: "2019-12-31",

        }];

        function handle(res) {
            res.rows = "10";
            res.total = "10"
        }

        getTable('/dwgxsxjzy/GetQYGcyj', {}, handle, {
            doc: $('#tableWarp'),
            pageSize: 'rows',
            count: 'total'
        });

        var tmp;
        for (var i = 0, len = ary.length; i < len; i++) {
            tmp = ary[i];
            str += "<tr>";
            str += "<td>" + (i + 1) + "</td>";
            for (var j = 0, len2 = item.length; j < len2; j++) {
                str += "<td>" + tmp[item[j]] || "" + "</td>";
            }
            str += "<td><div class='curd'>查看详情</div></td><td><div class='curd dtl'>查看详情</div></td>";
            str += "</tr>";
        }

        $("#yxqyzz").html(str);
    }
    var timeLine = [];
    $("#yxqyzz").on("click", ".dtl", function () {
        // http://101.37.84.226:22002?id=F10F7B61-4760-45A4-9797-E1F5E0248D70
        if (timeLine.length) {
            loadTimeLine(timeLine);
        } else {
            ajaxTpl("/DwgxSXJZY/GetQYZZSBTimeLine", {
                id: "F10F7B61-4760-45A4-9797-E1F5E0248D70"
            }, function (res) {
                timeLine = res.data
                loadTimeLine(timeLine);
            });
        }



    });

    function loadTimeLine(ary) {
        var tmp, str = "";
        for (var i = 0, len = ary.length; i < len; i++) {
            tmp = ary[i];

            str += '<li class="layui-timeline-item"><i class="layui-icon layui-timeline-axis ';
            str += tmp.taskstatus == 1 ? "complte" : ""
            str += '"></i>';
            str += '<div class="layui-timeline-content layui-text">';
            str += '<h3 class="layui-timeline-title">' + tmp.completetime + '</h3>';
            str += '<p class="taskname">' + tmp.taskname + '</p>';
            str += tmp.bz && tmp.bz.length ? '<p class="msg">备注: ' + tmp.bz + '</p>' : "";
            str += '</div></li>';
        }
        $("#timelineWarp").find("ul").html(str); //.height(window.innerHeight * 0.8 +"px");

        // layui.use('layer', function () {
        //     var layer = layui.layer;
        layer.open({
            type: 1,
            content: $("#timelineWarp"),
            area: ["50%", "80%"],
            title: "审核进度",
        });
        // });
    }


    $("#tabTitle").on("click", "dt", function () {
        $("#tabTitle").children().removeClass('active');
        $(this).addClass('active').next().addClass('active');
    });
    </script>
</body>

</html>